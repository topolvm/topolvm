#!/bin/sh -e

test $# -eq 3

namespace="$1"
label="$2"
container="$3"

tail_once() {
  sudo /snap/bin/microk8s.kubectl logs -f -n ${namespace} -l ${label} -c ${container}
}

tail_forever() {
  while true; do
    tail_once || continue
    sleep 3
  done
}

tail_forever

wait
